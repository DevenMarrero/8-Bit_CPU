output_file_name: 8-bit_cpu_microcode.bin
control_lines:
  PRI: 0x00000001
  PCI: 0x00000002
  AI: 0x00000003
  FI: 0x00000004
  TI: 0x00000005
  PCBI: 0x00000006
  BI: 0x00000007
  CI: 0x00000008
  MHI: 0x00000010
  MLI: 0x00000018
  MDI: 0x00000020
  II: 0x00000028
  SHI: 0x00000030
  SLI: 0x00000038
  PCE: 0x00000040
  FSEL: 0x00000080
  SPE: 0x00000100
  U/D: 0x00000200

  PRO: 0x00010000
  PCO: 0x00020000
  AO: 0x00030000
  FO: 0x00040000
  EO: 0x00050000
  TO: 0x00060000
  PRBO: 0x00070000
  BO: 0x00080000
  CO: 0x00100000
  SHO: 0x00180000
  SLO: 0x00200000
  MDO: 0x00280000

  ALU0: 0x00400000
  ALU1: 0x00800000
  ALU2: 0x01000000
  ALU3: 0x02000000
  ALU4: 0x04000000

  SCR: 0x40000000
  HLT: 0x80000000

flags:
  - zero
  - carry
  - negative

# instruction_prefix_steps:
#   0:
#     - lines: PCO
#         MLI
#   1:
#     - lines: PRO
#         MHI
#   2:
#     - lines: MDO
#         II
#         CE

instruction_prefix_steps:
  0:
    - PCO
    - MLI
  1:
    - PRO
    - MHI
  2:
    - MDO
    - II
    - CE

instructions:
  NOP:
    value: 0
    steps:
      3:
        - lines: SCR
  HLT:
    value: 0xFF
    steps:
      3:
        - lines: HLT
  #
  # MOV
  #
  MOV_A_B:
    value: 1
    steps:
      3:
        - lines: BO
            AI
      4:
        - lines: SCR
  MOV_A_C:
    value: 2
    steps:
      3:
        - lines: CO
            AI
      4:
        - lines: SCR
  MOV_A_SPL:
    value: 3
    steps:
      3:
        - lines: SLO
            AI
      4:
        - lines: SCR
  MOV_A_SPH:
    value: 4
    steps:
      3:
        - lines: SHO
            AI
      4:
        - lines: SCR
  MOV_A_#:
    value: 7
    steps:
      3:
        - lines: PCO
            MLI
      4:
        - lines: PRO
            MHI
      5:
        - lines: MDO
            AI
      6:
        - lines: SCR

  MOV_B_A:
    value: 8
    steps:
      3:
        - lines: AO
            BI
      4:
        - lines: SCR
  MOV_B_C:
    value: 0xA
    steps:
      3:
        - lines: CO
            BI
      4:
        - lines: SCR
  MOV_B_SPL:
    value: 0xB
    steps:
      3:
        - lines: SLO
            BI
      4:
        - lines: SCR
  MOV_B_SPH:
    value: 0xC
    steps:
      3:
        - lines: SHO
            BI
      4:
        - lines: SCR
  MOV_B_#:
    value: 0xF
    steps:
      3:
        - lines: PCO
            MLI
      4:
        - lines: PRO
            MHI
      5:
        - lines: MDO
            BI
      6:
        - lines: SCR

  MOV_C_A:
    value: 0x10
    steps:
      3:
        - lines: AO
            CI
      4:
        - lines: SCR
  MOV_C_B:
    value: 0x11
    steps:
      3:
        - lines: BO
            CI
      4:
        - lines: SCR
  MOV_C_SPL:
    value: 0x13
    steps:
      3:
        - lines: SLO
            CI
      4:
        - lines: SCR
  MOV_C_SPH:
    value: 0x14
    steps:
      3:
        - lines: SHO
            CI
      4:
        - lines: SCR
  MOV_C_#:
    value: 0x17
    steps:
      3:
        - lines: PCO
            MLI
      4:
        - lines: PRO
            MHI
      5:
        - lines: MDO
            CI
      6:
        - lines: SCR

  MOV_SPL_A:
    value: 18
    steps:
      3:
        - lines: AO
            SLI
      4:
        - lines: SCR
  MOV_SPL_B:
    value: 0x19
    steps:
      3:
        - lines: BO
            SLI
      4:
        - lines: SCR
  MOV_SPL_C:
    value: 0x1A
    steps:
      3:
        - lines: CO
            SLI
      4:
        - lines: SCR
  MOV_SPL_SPH:
    value: 0x1C
    steps:
      3:
        - lines: SHO
            SLI
      4:
        - lines: SCR
  MOV_SPL_#:
    value: 0x1F
    steps:
      3:
        - lines: PCO
            MLI
      4:
        - lines: PRO
            MHI
      5:
        - lines: MDO
            SLI
      6:
        - lines: SCR

  MOV_SPH_A:
    value: 20
    steps:
      3:
        - lines: AO
            SHI
      4:
        - lines: SCR
  MOV_SPH_B:
    value: 0x21
    steps:
      3:
        - lines: BO
            SHI
      4:
        - lines: SCR
  MOV_SPH_C:
    value: 0x22
    steps:
      3:
        - lines: CO
            SHI
      4:
        - lines: SCR
  MOV_SPH_SPL:
    value: 0x23
    steps:
      3:
        - lines: SLO
            SHI
      4:
        - lines: SCR
  MOV_SPH_#:
    value: 0x27
    steps:
      3:
        - lines: PCO
            MLI
      4:
        - lines: PRO
            MHI
      5:
        - lines: MDO
            SHI
      6:
        - lines: SCR
  #
  # JUMPS
  #
  JMP:
    value: 0x2F
    steps:
      3:
        - lines: PCO
            MLI
      4:
        - lines: MDO
            PCBI
            PCE
      5:
        - lines: PCO
            MLI
      6:
        - lines: MDO
            PRI
      7:
        - lines: PCBO
            PCI
      8:
        - lines: SCR
